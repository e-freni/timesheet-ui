<div class='page'>
  <div class='flex flex-col h-full justify-center items-center'>
    <mat-stepper #stepper [linear]='false' class='rounded-2xl border-2 border-primary w-1/2 h-1/4 mt-10'>
      <ng-template matStepperIcon='edit'>
        <mat-icon>mark_email_read</mat-icon>
      </ng-template>
      <mat-step [stepControl]='firstStepForm'>
        <form [formGroup]='firstStepForm' class='flex flex-col items-center text-center'>
          <ng-template matStepLabel>Richiesta di reset</ng-template>
          <div class='flex items-center w-1/3'>
            <mat-form-field appearance='standard' class='w-full'>
              <mat-label>Nome Utente</mat-label>
              <input
                formControlName='username'
                matInput
                placeholder='UnUtenteBellissimo'
                required>
            </mat-form-field>
            <button (click)='requestResetPassword(stepper)' [disabled]='isLoading'
                    class='text-primary disabled:hidden'>
              <icon-rightarrow [height]='6' [width]='6'></icon-rightarrow>
            </button>
            <app-spinning-circle *ngIf='isLoading' [color]="'#0675ff'"></app-spinning-circle>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]='secondStepForm' class='flex flex-col items-center text-center' label='Conferma reset'>
        <form [formGroup]='secondStepForm'>
          <div class='flex flex-col items-center justify-center'>
            <p>E' stata inviata una mail all'indirizzo associato contenente il <strong>token di conferma</strong>.
               Inseriscilo qui sotto per ultimare la procedura.</p>
            <div class='flex items-center w-1/3'>
              <mat-form-field appearance='standard' class='w-full'>
                <mat-label>Token di conferma</mat-label>
                <input
                  formControlName='confirmationToken'
                  matInput
                  placeholder='io-sono-un-token'
                  required>
              </mat-form-field>
              <button (click)='resetPassword(stepper)' [disabled]='isLoading' class='text-primary disabled:hidden'>
                <icon-rightarrow [height]='6' [width]='6'></icon-rightarrow>
              </button>
              <app-spinning-circle *ngIf='isLoading' [color]="'#0675ff'"></app-spinning-circle>
            </div>
          </div>
        </form>
      </mat-step>
      <mat-step class='h-full'>
        <ng-template matStepLabel>Fatto</ng-template>
        <div class='flex h-full justify-center pt-10'>
          <p>La mail contenente la nuova password ti Ã¨ stata inviata. Tra pochi secondi sarai reindirizzato alla pagina
             di login</p>
        </div>
      </mat-step>
    </mat-stepper>
  </div>
</div>
